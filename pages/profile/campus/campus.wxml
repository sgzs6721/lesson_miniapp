<!--campus.wxml-->
<view class="page">
  <view class="header">
    <view class="title">æ ¡åŒºç®¡ç†</view>
  </view>

  <!-- æœç´¢å’Œæ·»åŠ åŒºåŸŸ -->
  <view class="search-add-container">
    <view class="search-box">
      <input type="text" placeholder="æœç´¢æ ¡åŒº" bindinput="onSearch" value="{{searchKey}}" />
      <view class="search-icon">ğŸ”</view>
    </view>
    <button class="add-btn" bindtap="showAddCampus">æ·»åŠ </button>
  </view>

  <!-- æ ¡åŒºåˆ—è¡¨ -->
  <scroll-view class="campus-list" scroll-y>
    <view wx:if="{{campusList.length === 0}}" class="empty-tip">æš‚æ— æ ¡åŒº</view>
    <view wx:for="{{campusList}}" wx:key="id" class="campus-item">
      <view class="campus-info" bindtap="showCampusDetail" data-id="{{item.id}}">
        <view class="campus-name">{{item.name}}</view>
        <view class="campus-address">{{item.address}}</view>
        <view class="campus-meta">
          <text class="campus-phone">{{item.phone}}</text>
          <text class="dot">Â·</text>
          <text class="campus-manager">è´Ÿè´£äºº: {{item.manager}}</text>
        </view>
      </view>
      <view class="campus-actions">
        <view class="action-btn edit" catchtap="editCampus" data-id="{{item.id}}">ç¼–è¾‘</view>
        <view class="action-btn delete" catchtap="deleteCampus" data-id="{{item.id}}">åˆ é™¤</view>
      </view>
    </view>
  </scroll-view>

  <!-- æ·»åŠ /ç¼–è¾‘æ ¡åŒºå¼¹çª— -->
  <view class="modal {{showCampusModal ? 'show' : ''}}">
    <view class="modal-mask" bindtap="hideCampusModal"></view>
    <view class="modal-content">
      <view class="modal-header">
        <text>{{editingCampus ? 'ç¼–è¾‘æ ¡åŒº' : 'æ·»åŠ æ ¡åŒº'}}</text>
        <view class="modal-close" bindtap="hideCampusModal">Ã—</view>
      </view>
      <view class="modal-body">
        <view class="form-item">
          <text class="label">æ ¡åŒºåç§°</text>
          <input type="text" placeholder="è¯·è¾“å…¥æ ¡åŒºåç§°" value="{{campusForm.name}}" bindinput="onCampusFormInput" data-field="name" />
        </view>
        <view class="form-item">
          <text class="label">è¯¦ç»†åœ°å€</text>
          <input type="text" placeholder="è¯·è¾“å…¥è¯¦ç»†åœ°å€" value="{{campusForm.address}}" bindinput="onCampusFormInput" data-field="address" />
        </view>
        <view class="form-item">
          <text class="label">è”ç³»ç”µè¯</text>
          <input type="text" placeholder="è¯·è¾“å…¥è”ç³»ç”µè¯" value="{{campusForm.phone}}" bindinput="onCampusFormInput" data-field="phone" />
        </view>
        <view class="form-item">
          <text class="label">è´Ÿè´£äºº</text>
          <input type="text" placeholder="è¯·è¾“å…¥è´Ÿè´£äººå§“å" value="{{campusForm.manager}}" bindinput="onCampusFormInput" data-field="manager" />
        </view>
        <view class="form-item">
          <text class="label">å¤‡æ³¨</text>
          <textarea placeholder="è¯·è¾“å…¥å¤‡æ³¨ä¿¡æ¯" value="{{campusForm.remark}}" bindinput="onCampusFormInput" data-field="remark" />
        </view>
      </view>
      <view class="modal-footer">
        <button class="btn cancel" bindtap="hideCampusModal">å–æ¶ˆ</button>
        <button class="btn confirm" bindtap="saveCampus">ç¡®å®š</button>
      </view>
    </view>
  </view>

  <!-- æ ¡åŒºè¯¦æƒ…å¼¹çª— -->
  <view class="modal {{showDetailModal ? 'show' : ''}}">
    <view class="modal-mask" bindtap="hideDetailModal"></view>
    <view class="modal-content">
      <view class="modal-header">
        <text>æ ¡åŒºè¯¦æƒ…</text>
        <view class="modal-close" bindtap="hideDetailModal">Ã—</view>
      </view>
      <view class="modal-body">
        <view class="detail-item">
          <text class="label">æ ¡åŒºåç§°</text>
          <text class="value">{{currentCampus.name}}</text>
        </view>
        <view class="detail-item">
          <text class="label">è¯¦ç»†åœ°å€</text>
          <text class="value">{{currentCampus.address}}</text>
        </view>
        <view class="detail-item">
          <text class="label">è”ç³»ç”µè¯</text>
          <text class="value">{{currentCampus.phone}}</text>
        </view>
        <view class="detail-item">
          <text class="label">è´Ÿè´£äºº</text>
          <text class="value">{{currentCampus.manager}}</text>
        </view>
        <view class="detail-item">
          <text class="label">å­¦å‘˜æ•°é‡</text>
          <text class="value">{{currentCampus.studentCount || 0}}äºº</text>
        </view>
        <view class="detail-item">
          <text class="label">æ•™ç»ƒæ•°é‡</text>
          <text class="value">{{currentCampus.coachCount || 0}}äºº</text>
        </view>
        <view class="detail-item">
          <text class="label">è¯¾ç¨‹æ•°é‡</text>
          <text class="value">{{currentCampus.courseCount || 0}}ä¸ª</text>
        </view>
        <view class="detail-item">
          <text class="label">å¤‡æ³¨</text>
          <text class="value">{{currentCampus.remark || 'æ— '}}</text>
        </view>
      </view>
      <view class="modal-footer">
        <button class="btn confirm" bindtap="hideDetailModal">å…³é—­</button>
      </view>
    </view>
  </view>
</view> 